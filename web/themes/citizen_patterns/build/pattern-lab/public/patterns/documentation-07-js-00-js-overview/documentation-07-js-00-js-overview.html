<!DOCTYPE html>
<html class="pl">
  <head>
    <title>Pattern Lab</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" />

    <link rel="stylesheet" href="../../css/style.css?1573676537" media="all" />
    <link rel="stylesheet" href="../../css/pattern-scaffolding.css?1573676537" media="all" />
    <link rel="stylesheet" href="../../../../dist/style.css?1573676537" media="all" />
    <link rel="stylesheet" href="../../js/select2.min.css?1573676537" media="all" />
    <link rel="stylesheet" href="../../js/swipebox/src/css/swipebox.css?1573676537" media="all" />

    <!-- Begin Pattern Lab (Required for Pattern Lab to run properly) -->
    <!-- never cache patterns -->
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<link rel="stylesheet" href="../../styleguide/css/styleguide.min.css?1573676537" media="all">
<link rel="stylesheet" href="../../styleguide/css/prism-typeahead.min.css?1573676537" media="all" />
    <!-- End Pattern Lab -->

  </head>
  <body class="">
    <!-- for js not found errors (only in styleguide)-->
  	<div class="visually-hidden">
  		<div id="tabs" class="tabs"></div>
  	</div>
<a name="js-overview" id="js-overview"></a>

<div class="doc-text">
	<div class="doc-section">
		<h4 class="doc-section-title">JS in PL and Drupal</h4>
		<div class="doc-section-inner">
			<p><strong>jQuery—</strong> jQuery is what we use to write 98% of the JS on a site. jQuery is a core Drupal dependency and all of the JS files in the theme are set up to use jQuery functions inside of Drupal behaviors.</p>
			<p>When adding a new file, its usually easiest to copy an existing theme JS file and just delete everything between the opening line: <span class="code">(function($, Drupal) {</span> and the  closing line: <span>})(jQuery, Drupal);</span>. Those two lines let Drupal know that it should use its core jQuery file to execute the behaviors inside the file. If you do create a new file from scratch or adding new behaviors to a file, make sure that everything is between those lines.</p>
			<p><strong><a name="drupal-behaviors" id="drupal-behaviors"></a>Drupal Behaviors—</strong> All jQuery functions in theme JS files need to be inside of <a href="https://www.drupal.org/node/304258#drupal-behaviors">Drupal Behaviors</a>. This ensures that all jQuery code gets called after the DOM has loaded so that you code is not jumping ahead of things it might need to function (like ajax). Drupal behaviors also comes with another line that attaches a context function. Using context ensures that your script is only searched within the given context rather than the entire document. <p>Example: <span class="code">Drupal.behaviors.slideshow = {<br>attach: function (context, settings) {<br>$(".paragraph--type--slideshow", context).once('slider').each(function(){ </span> <strong>Drupal behaviors and contexts should never be repeated.</strong> ANy duplicate behavior will not be called in the DOM.</p>
			<p>The above example opening lines of a behavior and context will search only instances of <span class="code">.paragraph--type--slideshow</span> and will only run the code once for each instance it finds in the DOM. Using context helps make sure that you are not slowing down the site by searching the whole DOM for elements that are not there and by ensuring that code is only run once, rather than looping through each instance and running multiple times. This is especially important with .resize() responsive functions.</p>
			<p><strong>Limit JS as much as possible—</strong> While JS is a powerful tool, Twig & CSS expressions/animations can do a lot of what we used to need JS for. It is preferable to use Twig or CSS whenever possible to both limit the amount of files being called as well as proofing again people who have JS turned off in their browser and errors from external scripts/applications interfering with your scripts.</p>
		</div>
	</div>
</div>


  <!--DO NOT REMOVE-->
  <script type="text/json" id="sg-pattern-data-footer" class="sg-pattern-data">
  {"cssEnabled":false,"lineage":[],"lineageR":[],"patternBreadcrumb":{"patternType":"documentation","patternSubtype":"js"},"patternDesc":"","patternExtension":"twig","patternName":"js overview","patternPartial":"documentation-js-overview","patternState":"","extraOutput":[]}
</script>

<script>
  /*!
  * scriptLoader - v0.1
  *
  * Copyright (c) 2014 Dave Olsen, http://dmolsen.com
  * Licensed under the MIT license
  *
  */
  
  var scriptLoader = {
    run: function(js,cb,target) {
      var s  = document.getElementById(target+'-'+cb);
      for (var i = 0; i < js.length; i++) {
        var src = (typeof js[i] != 'string') ? js[i].src : js[i];
        var c   = document.createElement('script');
        c.src   = '../../'+src+'?'+cb;
        if (typeof js[i] != 'string') {
          if (js[i].dep !== undefined) {
            c.onload = function(dep,cb,target) {
              return function() {
                scriptLoader.run(dep,cb,target);
              }
            }(js[i].dep,cb,target);
          }
        }
        s.parentNode.insertBefore(c,s);
      }
    }
  }
</script>

<script id="pl-js-polyfill-insert-1573676537">
  (function() {
    if (self != top) {
      var cb = '1573676537';
      var js = [];
      if (typeof document !== 'undefined' && !('classList' in document.documentElement)) {
        js.push('styleguide/bower_components/classList.min.js');
      }
      scriptLoader.run(js,cb,'pl-js-polyfill-insert');
    }
  })();
</script>

<script id="pl-js-insert-1573676537">
  (function() {
    if (self != top) {
      var cb = '1573676537';
      var js = [ { 'src': 'styleguide/bower_components/jwerty.min.js', 'dep': [ 'styleguide/js/patternlab-pattern.min.js' ] } ];
      scriptLoader.run(js,cb,'pl-js-insert');
    }
  })();
</script>

  <!-- Drupal-specific files - UNCOMMENT AS NECESSARY -->
  <!-- may need to change these below based on path -->
  <script src="../../js/ready.min.js"></script>
  <script src="../../js/drupal.js"></script>
  <script src="../../js/underscore-min.js"></script>
  <script src="../../js/jquery.js"></script>
  <script src="../../js/jquery.once.min.js"></script>
  <script src="../../js/select2.min.js"></script>
  <script src="../../js/stacktable/stacktable.min.js"></script>
  <script src="../../js/swipebox//src/js/jquery.swipebox.js"></script>
  <script src="../../../../dist/scripts-styleguide.js"></script>
  <script>Drupal.attachBehaviors();</script>
  <script>
    $("select").once('selects').each(function(){  
        $( '.sg-pattern-example select' ).select2({
          placeholder: "Select an option"
        });
    });
  </script>

  <script>
    $(".node--type-landing_page select").once('landing_select').each(function(){  
        $(this).select2();
    });
  </script>

  <script>
    $(".text-long table").once('stack').each(function(){  
        $(this).cardtable({myClass:'responsive-table'});
        $(document).ajaxComplete(function() {
            $('.layout-container table').cardtable({myClass:'responsive-table'});
        });
    });
  </script>
  </body>
</html>
