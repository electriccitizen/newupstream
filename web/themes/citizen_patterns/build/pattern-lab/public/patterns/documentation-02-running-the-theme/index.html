<!DOCTYPE html>
<html class="pl">
  <head>
    <title>Pattern Lab</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" />

    <link rel="stylesheet" href="../../css/style.css?1573669448" media="all" />
    <link rel="stylesheet" href="../../css/pattern-scaffolding.css?1573669448" media="all" />
    <link rel="stylesheet" href="../../../../dist/style.css?1573669448" media="all" />
    <link rel="stylesheet" href="../../js/select2.min.css?1573669448" media="all" />
    <link rel="stylesheet" href="../../js/swipebox/src/css/swipebox.css?1573669448" media="all" />

    <!-- Begin Pattern Lab (Required for Pattern Lab to run properly) -->
    <!-- never cache patterns -->
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<link rel="stylesheet" href="../../styleguide/css/styleguide.min.css?1573669448" media="all">
<link rel="stylesheet" href="../../styleguide/css/prism-typeahead.min.css?1573669448" media="all" />
    <!-- End Pattern Lab -->

  </head>
  <body class="">
    <!-- for js not found errors (only in styleguide)-->
  	<div class="visually-hidden">
  		<div id="tabs" class="tabs"></div>
  	</div>
<!-- View All Patterns in a Pattern Sub-Type -->
<div class="sg-main" role="main">
  <!-- Patterns -->
  <div id="sg-patterns">
                  <div id="viewall-documentation-running-the-theme" class="sg-subtype">
  <h2>
    <a href="../../patterns/documentation-02-running-the-theme/index.html" class="patternLink" data-patternpartial="viewall-documentation-running-the-theme">
      running the theme
    </a>
  </h2>
  
  <div class="sg-pattern-body">
    
  </div>
</div>                        <div id="documentation-npm-start" class="sg-pattern">
  <div class="sg-pattern-head">
    <h3 class="sg-pattern-title">
      <a href="../../patterns/documentation-02-running-the-theme-00-npm-start/documentation-02-running-the-theme-00-npm-start.html" class="patternLink" data-patternpartial="documentation-npm-start" title="Link to Pattern">
        npm start
        
              </a>
    </h3>
    
    <div class="sg-pattern-breadcrumb">
      
    </div>
    
    <a href="#" data-patternpartial="documentation-npm-start" title="View Pattern Info" id="sg-pattern-extra-toggle-documentation-npm-start" class="sg-pattern-extra-toggle">
      <span>&#9660;</span>
    </a>
  </div>
  
  <div class="sg-pattern-extra" id="sg-pattern-extra-documentation-npm-start"></div>
    
  <div class="sg-pattern-example">
    <a name="npm-start" id="npm-start"></a>

<div class="doc-text">
	<div class="doc-section">
		<h4 class="doc-section-title">NPM & Node.js</h4>
		<div class="doc-section-inner">
			<p><a href="https://www.npmjs.com/" target="_blank">NPM</a> is used to install small packages of code that run site tasks. These are very small configuration scripts defined in a package.json file and run through the command line. The big advantage of npm scripts is that you are always up to date. If a package is updated, the run script will automatically use the updated version (unless specified otherwise).</p>
			<p>NPM modules are defined in the package.json as dependencies and are fetched and installed by <a href="https://nodejs.org/en/" target="_blank">Node.js</a>, which is a javascript based run-time builder. NPM Scripts in the package.json define tasks for those node modules.</p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">Task Runners</h4>
		<div class="doc-section-inner">
			<p><a href="https://gulpjs.com/" target="_blank">Gulp</a> and <a href="https://gruntjs.com/" target="_blank">Grunt</a> are common task runners. that function very similar to NPM scripts and either can be used on its own, or in combination with NPM scripts to run theme tasks.</p>
			<p>Citizen Patterns takes advantage of both NPM and Gulp in order to power the theme tasks. Gulp allows use to specify unique tasks that expand npm modules installed by the theme. CRunning those tasks from a single npm command allows us to concurrently run different tasks without having to enter and re-enter multiple Gulp commands.</p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">Citizen Patterns NPM Start</h4>
		<div class="doc-section-inner">
			<p>After install (install instructions in theme ReadMe), Citizen Patterns is run using a single command line command: <strong>npm start</strong> run in the theme root folder. NPM Start kicks off these Gulp tasks:
			<ol>
				<li>Gulp Clean</li>
				<li>Gulp Compile</li>
				<li>Gulp Theme</li>
			</ol>
			<p>These Gulp tasks are set in the Emulsify-Gulp gulp task collection fetched as a node module from the <a href="https://github.com/fourkitchens/emulsify-gulp" target="_blank">Four Kitchen's Emulsify Gulp repo</a> when the theme is first installed. All tasks set in the default Emulsify-Gulp repo index.js file which constructs tasks from the repo's gulp-config file that can be overridden or disabled in the local.gulp-config.js file in the theme root. New gulp tasks can also be set in the local-config file and added via the npm start command.</p>
			<p><strong>Gulp Clean—</strong> Gulp Clean runs the Scss and ES Lint linting.</p>
			<p><strong>Gulp Compile—</strong> Gulp Compile finds the individual icons in theme/images/icons/src and compiles them into a single sprite then builds selector classes and mixins that set the proper background position for each icon. Icon base size (80px x 80px)is set in the local.gulp-config override for this task.</p>
			<p><strong>Gulp Theme—</strong> Gulp Theme calls the Gulp Serve task defined in the Emulsify Gulp repo's index.js file which runs the Sass & JS Compiler's, runs the Sass to Yml conversion (for colors), watches all the pattern lab files for changes and runs the browser sync, and finally builds the local pattern lab.</p>
			<p>Emulsify Gulp also has options for Web Speed Tests and Build/Deploy functions for GH Pages, but OC Patterns is not using those at this time.</p>
		</div>
	</div>
</div>


  </div>
  
  <script type="text/json" id="sg-pattern-data-documentation-npm-start" class="sg-pattern-data">
    {"lineage":[],"lineageR":[],"patternBreadcrumb":{"patternType":"documentation","patternSubtype":"running the theme"},"patternDesc":"","patternExtension":"twig","patternName":"npm start","patternPartial":"documentation-npm-start","patternState":""}
  </script>
</div><!--end .sg-pattern-->                        <div id="documentation-pl-&amp;-non-pl-files" class="sg-pattern">
  <div class="sg-pattern-head">
    <h3 class="sg-pattern-title">
      <a href="../../patterns/documentation-02-running-the-theme-01-pl-&amp;-non-pl-files/documentation-02-running-the-theme-01-pl-&amp;-non-pl-files.html" class="patternLink" data-patternpartial="documentation-pl-&amp;-non-pl-files" title="Link to Pattern">
        pl &amp; non pl files
        
              </a>
    </h3>
    
    <div class="sg-pattern-breadcrumb">
      
    </div>
    
    <a href="#" data-patternpartial="documentation-pl-&amp;-non-pl-files" title="View Pattern Info" id="sg-pattern-extra-toggle-documentation-pl-&amp;-non-pl-files" class="sg-pattern-extra-toggle">
      <span>&#9660;</span>
    </a>
  </div>
  
  <div class="sg-pattern-extra" id="sg-pattern-extra-documentation-pl-&amp;-non-pl-files"></div>
    
  <div class="sg-pattern-example">
    <a name="pl-non-pl-files" id="pl-non-pl-files"></a>

<div class="doc-text">
	<p>Citizen Patterns uses both Pattern Lab files held in the theme/components folder and non-pl files (Drupal & Pattern Lab related files) held outside the /components folders.</p>
	<div class="doc-section">
		<h4 class="doc-section-title">Theme Root Files</h4>
		<div class="doc-section-inner">
			<p><strong>.stylelintrc—</strong> Sets Sass lint rules.</p>
			<p><strong>gulpfile.js—</strong> Requires both the local.gulp-config.js file and the Emulsify Gulp npm package in order to define gulp tasks to run the theme.</p>
			<p><strong>local.gulp-config.js—</strong> Overwrites gulp tasks from the default Emulsify Gulp npm package and holds any new custom Citizen Patterns gulp tasks.</p>
			<p><strong>logo.svg—</strong> Sets the site logo that appears in the header.</p>
			<p><strong>citizen_patterns.breakpoints.yml—</strong> Defines the Citizen Patterns custom breakpoint widths and 1x & 2x multipliers for responsive image styles.</p>
			<p><strong>citizen_pattern.info.yml</strong> Outlines all the theme information and sets the block layout regions and Pattern Lab component top level folders that can be inherited into Drupal.</p>
			<p><strong>citizen_patterns.layouts.yml—</strong> Defines the custom Citizen Patterns templates and their regions.</p>
			<p><strong>citizen_patterns.libraries.yml—</strong> Sets the libraries that can be attached to Twig templates in Drupal. (Fonts, CSS, JS) <strong>External libraries added here should be brought in through CDN whenever possible.</strong></p>
			<p><strong>citizen_patterns.theme—</strong> Provides theme level PHP functions and hooks.</p>
			<p><strong>package-lock.json—</strong> Automatic file generated from package.json on <span class="code">npm install</span>. Defines all package dependencies.</p>
			<p><strong>package.json—</strong> Assigns dependencies and npm scripts for the theme.</p>
			<p><strong>README.txt—</strong> About the theme and how to install.</p>
			<p><strong>screenshot.jpg & screenshot.png—</strong> Theme cover images shown in Drupal's Appearance configuration.</p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">Components Folder</h4>
		<div class="doc-section-inner">
			<p><strong>/components—</strong> The components folder holds all the files that run Pattern Lab. These are compiled in the /theme/pattern-lab folder (for gulp deploy and the browser local Pattern Lab instance) and the /dist folder (holds the styles.css, style maps, all js files, and the svg sprite) for use in Drupal.</p>
			<p><strong>/components/patterns—</strong> 95% of all theming is done in the /components/_patterns folder. This is where all Scss files, and nearly all Twig and JS files are stored. compiled from and attached from.</p>
			<p><strong>/components/layouts—</strong> This folder holds the Drupal-specific Citizen Patterns layouts and related files for Layout Builder.</p>
			<p><strong>/components/meta—</strong> Holds Pattern Lab specific head and foot info.</p>
			<p><strong>/components/css—</strong> Houses the CKEditor custom stylesheet cke.css and the Pattern Lab scaffolding style sheets (which should never be edited). <strong>Only the cke.css stylesheet should ever be edited in this folder.</strong> And that should only happen when adding new custom styles to CKEditor.</p>
			<p><strong>/components/images—</strong> This folder holds any images that need to be loaded into Pattern Lab and don't come from <a href="http://placeimg.com" target="_blank">Place Img</a>.</p>
			<p><strong>/components/js—</strong> holds both Pattern Lab specific non-component JS files (like the drupal.js and jquery.js files needed to emulate Drupal Behaviors in Pattern Lab).</p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">Dist Folder</h4>
		<div class="doc-section-inner">
			<p><strong>/dist—</strong> The Dist folder holds most the compiled output from the <span class="code">gulp theme</span> function run by <span class="code">npm start</span>.</p>
			<p>All compiled JS files are put into folders reflecting either their component levels or their global root nature.</p>
			<p>All Scss files are compiled into the style.css folder and are mapped in style.css.map for easy debugging in an inspector.</p>
			<p>All SVG icons compiled from /theme/images/icons/src are output as single sprite in /dist/svg/sprite.css.svg. They are also assigned css selector classes and mixins with automatic background positioning based on their individual files names.</p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">Fonts Folder</h4>
		<div class="doc-section-inner">
			<p>Holds the font awesome webfont files and any custom self-hosted fonts for the site.</p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">Images Folder</h4>
		<div class="doc-section-inner">
			<p>Holds core theme images and svg icons generated into the svg sprite (images/icons/src/).</p>
			<p>NOTE: any new icons not added to the sprite or images used as background images can be added in a new sub-folder within this folder.</p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">JS Folder</h4>
		<div class="doc-section-inner">
			<p>Holds the citizen-patterns.js file. This file is automatically written from an unused example PL file and should not be edited or deleted. All JS should be housed in component js files.</p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">Node_modules Folder</h4>
		<div class="doc-section-inner">
			<p>Automatically generated on <span class="code">npm install</span> and holds all theme packages.</p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">Pattern-lab Folder</h4>
		<div class="doc-section-inner">
			<p>Provides the public output generated from the /component folder by the <span class="code">gulp theme</span> task. This folder is what you see in the local Pattern Lab browser instance and is what would be deployed to Github Pages if we ever published Pattern Lab for clients. <strong>This folder should never be altered or deleted.</strong></p>
		</div>
	</div>
	<div class="doc-section">
		<h4 class="doc-section-title">Templates Folder</h4>
		<div class="doc-section-inner">
			<p>Holds all theme-specific Drupal html.twig templates. <strong>NOTE:</strong> All customized templates are held in the zzz-custom folder. All other templates are default theme templates. <a href="#custom-templates">Learn more about customizing templates</a>.</p>
		</div>
	</div>
</div>


  </div>
  
  <script type="text/json" id="sg-pattern-data-documentation-pl-&amp;-non-pl-files" class="sg-pattern-data">
    {"lineage":[],"lineageR":[],"patternBreadcrumb":{"patternType":"documentation","patternSubtype":"running the theme"},"patternDesc":"","patternExtension":"twig","patternName":"pl & non pl files","patternPartial":"documentation-pl-&-non-pl-files","patternState":""}
  </script>
</div><!--end .sg-pattern-->                        <div id="documentation-adding-&amp;-removing-pl-files" class="sg-pattern">
  <div class="sg-pattern-head">
    <h3 class="sg-pattern-title">
      <a href="../../patterns/documentation-02-running-the-theme-02-adding-&amp;-removing-pl-files/documentation-02-running-the-theme-02-adding-&amp;-removing-pl-files.html" class="patternLink" data-patternpartial="documentation-adding-&amp;-removing-pl-files" title="Link to Pattern">
        adding &amp; removing pl files
        
              </a>
    </h3>
    
    <div class="sg-pattern-breadcrumb">
      
    </div>
    
    <a href="#" data-patternpartial="documentation-adding-&amp;-removing-pl-files" title="View Pattern Info" id="sg-pattern-extra-toggle-documentation-adding-&amp;-removing-pl-files" class="sg-pattern-extra-toggle">
      <span>&#9660;</span>
    </a>
  </div>
  
  <div class="sg-pattern-extra" id="sg-pattern-extra-documentation-adding-&amp;-removing-pl-files"></div>
    
  <div class="sg-pattern-example">
    <a name="pl-file-changes" id="pl-file-changes"></a>

<div class="doc-text">
	<div class="doc-section">
		<h4 class="doc-section-title">Adding New Pattern Lab (PL) Files</h4>
		<div class="doc-section-inner">
			<p>New files of any type can be added to any level of Pattern Lab—although the index numbers might need to be rearranged for some sections. After a new file is added, if you are currently running the theme (npm start is active in a terminal window), depending on the type of file you are adding, you may need to quit the current theming command run (control + C in terminal) and start a new one with npm start. It is a good practice to get into doing this whether you have to for the file type you are adding or not. <strong>File names should use - instead of _ to denote spaces</strong> unless there is a specific need for _ (like _icon_sprite.scss) which is generated by a gulp task. <strong>No Pattern Lab visible files can be named exactly the same as another, and index numbers do not count in the name. If two files have the same name (even with different indexes) the second one will not show in Pattern Lab.</strong></p>
			<p><strong>New Icon SVG Files—</strong> If you are adding a new svg file to the icon sprite via theme/images/icons/src, you will need to restart the theme to add the icon to the sprite. NOTE: You will also need to recreate the viewbox position x/y values for any svg tag's in twig files (cough:: Social Media widget icons) because icons are repositioned in the sprite each time it is re-generated. </br></br>Icons used as backgrounds will automatically reposition themselves to work unless the new icon(s) you added created another column or row in the sprite. Easiest way to tell is to look at the icons grid (Atoms > Images > Icons) to see if everything looks correct. If the size or placement is off, load the sprite (found in theme/dist/svg) into a browser or Adobe Illustrator and count the rows/columns and change the values for those variables at the top of Base > _03-background-sizes.scss to the new number of rows/columns. The background svg's will then fix themselves.</p>
			<p><strong>Adding Hidden Files—</strong> By default, all files or all types (twig, sass, yml, js, md) added to Pattern Lab will be used/shown in Pattern lab. However, there are some files you do not want to use/show in Pattern lab—either because they are being only used in Drupal or are being compiled/inherited into another file. These files can hidden from Pattern Lab by including a leading _ in their file name. Scss files are a great example of this. <strong>No .scss files should be shown in Pattern Lab</strong> because they are all compiled into the css which is shown in Pattern Lab. Most .js files should also be excluded because they are primarily used in Drupal, but should be kept with their Pattern lab components.</p>
			<p><strong>File Index Numbers—</strong> Many Pattern Lab files are preceded by an index number. This number overrides the default alphabetical file name structure to force a particular order on files. This is very useful for forcing an atomic design approach to theme structure as well as ensuring Sass mixin inclusion.</p>
			<p><strong>New Twig Files—</strong> New Twig files and any twig files changes that are inherited into Drupal html.twig files necessitate a site cache clear after creation/alteration in order to get the changes to show in Drupal. The same is true of changes made via macros.</p>
		</div>
	</div>
</div>


  </div>
  
  <script type="text/json" id="sg-pattern-data-documentation-adding-&amp;-removing-pl-files" class="sg-pattern-data">
    {"lineage":[],"lineageR":[],"patternBreadcrumb":{"patternType":"documentation","patternSubtype":"running the theme"},"patternDesc":"","patternExtension":"twig","patternName":"adding & removing pl files","patternPartial":"documentation-adding-&-removing-pl-files","patternState":""}
  </script>
</div><!--end .sg-pattern-->            </div> <!--end #sg-patterns-->
</div><!--end .sg-main-->
  <!--DO NOT REMOVE-->
  <script type="text/json" id="sg-pattern-data-footer" class="sg-pattern-data">
  {"patternPartial":"viewall-documentation-running-the-theme"}
</script>

<script>
  /*!
  * scriptLoader - v0.1
  *
  * Copyright (c) 2014 Dave Olsen, http://dmolsen.com
  * Licensed under the MIT license
  *
  */
  
  var scriptLoader = {
    run: function(js,cb,target) {
      var s  = document.getElementById(target+'-'+cb);
      for (var i = 0; i < js.length; i++) {
        var src = (typeof js[i] != 'string') ? js[i].src : js[i];
        var c   = document.createElement('script');
        c.src   = '../../'+src+'?'+cb;
        if (typeof js[i] != 'string') {
          if (js[i].dep !== undefined) {
            c.onload = function(dep,cb,target) {
              return function() {
                scriptLoader.run(dep,cb,target);
              }
            }(js[i].dep,cb,target);
          }
        }
        s.parentNode.insertBefore(c,s);
      }
    }
  }
</script>

<script id="pl-js-polyfill-insert-1573669448">
  (function() {
    if (self != top) {
      var cb = '1573669448';
      var js = [];
      if (typeof document !== 'undefined' && !('classList' in document.documentElement)) {
        js.push('styleguide/bower_components/classList.min.js');
      }
      scriptLoader.run(js,cb,'pl-js-polyfill-insert');
    }
  })();
</script>

<script id="pl-js-insert-1573669448">
  (function() {
    if (self != top) {
      var cb = '1573669448';
      var js = [ { 'src': 'styleguide/bower_components/jwerty.min.js', 'dep': [ 'styleguide/js/patternlab-pattern.min.js' ] } ];
      scriptLoader.run(js,cb,'pl-js-insert');
    }
  })();
</script>

  <!-- Drupal-specific files - UNCOMMENT AS NECESSARY -->
  <!-- may need to change these below based on path -->
  <script src="../../js/ready.min.js"></script>
  <script src="../../js/drupal.js"></script>
  <script src="../../js/underscore-min.js"></script>
  <script src="../../js/jquery.js"></script>
  <script src="../../js/jquery.once.min.js"></script>
  <script src="../../js/select2.min.js"></script>
  <script src="../../js/stacktable/stacktable.min.js"></script>
  <script src="../../js/swipebox//src/js/jquery.swipebox.js"></script>
  <script src="../../../../dist/scripts-styleguide.js"></script>
  <script>Drupal.attachBehaviors();</script>
  <script>
    $("select").once('selects').each(function(){  
        $( '.sg-pattern-example select' ).select2({
          placeholder: "Select an option"
        });
    });
  </script>

  <script>
    $(".node--type-landing_page select").once('landing_select').each(function(){  
        $(this).select2();
    });
  </script>

  <script>
    $(".text-long table").once('stack').each(function(){  
        $(this).cardtable({myClass:'responsive-table'});
        $(document).ajaxComplete(function() {
            $('.layout-container table').cardtable({myClass:'responsive-table'});
        });
    });
  </script>
  </body>
</html>
