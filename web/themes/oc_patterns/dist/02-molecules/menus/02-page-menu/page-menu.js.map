{"version":3,"sources":["02-molecules/menus/02-page-menu/page-menu.js"],"names":["window","outerWidth","attr","removeAttr","behaviors","pageMenu","attach","once","each","click","preventDefault","is","removeClass","find","addClass","closest","next","slideUp","slideDown","on","_","debounce","trigger","document","ready","length","prepend","siblings","end","parentsUntil","toggleClass","jQuery","Drupal"],"mappings":"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","file":"page-menu.js","sourcesContent":["(function($, Drupal) {\nDrupal.behaviors.pageMenu = {\n\tattach: function (context, settings) {\n\t\t$(\".block--system-menu.page-menu\", context).once('page-menu').each(function(){  \n\t\t\t//mobile toggle\n\t\t\t$('.page-menu-toggle').click(function(e){\n\t\t\t\te.preventDefault();\n\t\t      if($(window).outerWidth() < 760){\n\t\t        if($(this).is('.active-nav')){\n\t\t          $(this).attr('aria-expanded', 'false').removeClass('active-nav').find('i').removeClass('fa-times-circle').addClass('fa-bars').closest('#page-menu-title').next('#page-menu-wrapper').attr('aria-hidden', 'true').slideUp(500);\n\t\t        }else{\n\t\t          $(this).attr('aria-expanded', 'true').addClass('active-nav').find('i').removeClass('fa-bars').addClass('fa-times-circle').closest('#page-menu-title').next('#page-menu-wrapper').attr('aria-hidden', 'false').slideDown(500);\n\t\t        }\n\t\t      }\n\t\t\t});\n\n\t\t\t$(window).on('resize',  _.debounce( mobilePagenav, 10 )).trigger('resize');\n\t\t\t\t\t\n\t\t\t//need doc ready because active-class script fires after theme scripts\n\t\t\t$(document).ready(function(){\n\t\t\t\t$('#page-menu-wrapper ul li').each(function(){\n\n\t\t\t\t\t//find nested lists and set their parents and expanders\n\t\t\t\t\tif(($('ul', this).length) && (!$('.expander:first', this).length) ){\n\t\t\t\t\t  $(this).addClass('parent').prepend('<a href=\"#\" class=\"expander\" aria-expanded=\"false\" role=\"button\"></a>').find(' > a:not(.expander)').next('ul').attr('aria-hidden', 'true');\n\t\t\t\t\t}\n\n\t\t\t\t\t//find active links and set the active trail\n\t\t\t\t\t$('.is-active', this).attr('aria-expanded', 'true').siblings('ul').slideDown(100).attr('aria-hidden', 'false').end().parentsUntil('#page-menu-wrapper > ul').addClass('active-trail expanded');\n\n\t\t\t\t\t//find active-trail li and add aria expanded role to the expander\n\t\t\t\t\t$('li.active-trail > .expander').attr('aria-expanded', \"true\").siblings('ul').attr('aria-hidden', 'false');\n\t\t\t\t});\n\n\t\t\t\t//set button roles, tab indexes and keypresses on sidebar links\n\t\t\t\t$(document).on('click','#page-menu-wrapper .expander',function(e){\n\t\t\t\t\te.preventDefault();\n          $(this).closest('li').toggleClass('expanded');\n          if($(this).attr('aria-expanded') == 'false'){\n            $(this).attr('aria-expanded', \"true\").siblings('ul').slideDown(500).attr('aria-hidden', 'false').end().closest('li').removeClass('expanded');\n          }else{\n            $(this).attr('aria-expanded', \"false\").siblings('ul').slideUp(500).attr('aria-hidden', 'true');\n          }\n\t\t\t\t});\n\n\t\t\t});\n\t\t});\n\t}\n}//end page menu function\n\nfunction mobilePagenav() {\n  var wwidth = $(window).outerWidth();\n  if (wwidth < 980) {\n    //add aria roles to menu title and wrapper if not already set by click above \n    if(!$('.page-menu-toggle').attr('aria-controls')){\n      $('.page-menu-toggle').attr({\n        'aria-controls': 'page-menu-wrapper', \n        'aria-expanded': 'false', \n        'role': 'button'\n      });\n      $('#page-menu-wrapper').attr('aria-hidden', 'true');\n    } \n  }else{\n    //strip all aria roles & prevent click\n    $('.page-menu-toggle').removeAttr('aria-controls aria-expanded role');\n    $('#page-menu-wrapper').removeAttr('aria-hidden');\n  }\n};\n\n\n})(jQuery, Drupal);\n"]}